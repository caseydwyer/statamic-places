(()=>{"use strict";const e=function(e,t,l,a,c,s,i,n){var o,r="function"==typeof e?e.options:e;if(t&&(r.render=t,r.staticRenderFns=l,r._compiled=!0),a&&(r.functional=!0),s&&(r._scopeId="data-v-"+s),i?(o=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),c&&c.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},r._ssrRegister=o):c&&(o=n?function(){c.call(this,(r.functional?this.parent:this).$root.$options.shadowRoot)}:c),o)if(r.functional){r._injectStyles=o;var d=r.render;r.render=function(e,t){return o.call(t),d(e,t)}}else{var p=r.beforeCreate;r.beforeCreate=p?[].concat(p,o):[o]}return{exports:e,options:r}}({name:"PlacesSearch",mixins:[Fieldtype],props:{placeholder:{type:String,default:"Search..."},value:{type:Object,default:function(){return{}}}},data:function(){return{placeSelected:!1,placesSearch:null,selectedPlace:{}}},mounted:function(){this.initSelectedPlace(),this.initPlacesSearch(),this.value&&this.value.line_1&&(this.selectedPlace=this.value)},computed:{fieldId:function(){return"statamic-places-"+this._uid},replicatorPreview:function(){if(!this.value)return"";var e=this.value.line_1+", "+this.value.city+", "+this.value.state;return this.value.line_1?e:""}},methods:{initPlacesSearch:function(){this.placesSearch=new google.maps.places.Autocomplete(document.getElementById(this.fieldId),{fields:["address_components","geometry","name"]}),this.placesSearch.addListener("place_changed",this.placeChanged)},initSelectedPlace:function(){this.placeSelected=!1,this.selectedPlace={title:"",line_1:"",city:"",state:"",country:"",zipcode:"",lat:"",lon:"",google_place_id:""}},placeChanged:function(){var e=this.placesSearch.getPlace();0==e.length||e.length>1||(this.placeSelected=!0,this.parseSelectedPlace(e))},resetSelectedPlace:function(){this.initSelectedPlace(),this.update(this.selectedPlace)},parseSelectedPlace:function(e){var t=this,l=e.address_components;_.each(l,(function(e){_.each(e.types,(function(l){switch(l){case"street_number":t.selectedPlace.line_1=e.long_name;break;case"route":t.selectedPlace.line_1+=" "+e.long_name;break;case"locality":t.selectedPlace.city=e.long_name;break;case"administrative_area_level_1":t.selectedPlace.state=e.short_name;break;case"country":t.selectedPlace.country=e.short_name;break;case"postal_code":t.selectedPlace.zipcode=e.long_name}}))})),this.selectedPlace.lat=e.geometry.location.lat(),this.selectedPlace.lon=e.geometry.location.lng(),this.selectedPlace.title=e.name,this.selectedPlace.google_place_id=e.place_id,this.update(this.selectedPlace)}}},(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",{staticClass:"flex items-center w-full mb-4"},[l("div",{staticClass:"flex-grow"},[l("text-input",{attrs:{id:e.fieldId,type:"text",placeholder:e.placeholder,value:e.selectedPlace.title}})],1),e._v(" "),l("div",{staticClass:"flex text-red ml-2 mr-1 opacity-50 hover:opacity-100 cursor-pointer",on:{click:e.resetSelectedPlace}},[l("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"19",viewBox:"0 0 18 19"}},[l("g",{attrs:{fill:"none","fill-rule":"evenodd",stroke:"currentColor","stroke-width":"2",transform:"translate(1 1.545)"}},[l("path",{attrs:{d:"M16 0L.160533333 15.8389333M16 15.8389333L.160533333 0"}})])])])]),e._v(" "),e.placeSelected&&e.config.expand_on_select?l("div",{staticClass:"flex flex-wrap -mx-2"},[l("div",{staticClass:"w-full px-2 mb-3"},[l("label",[e._v("Address Line 1")]),e._v(" "),l("text-input",{attrs:{type:"text",placeholder:"123 Cherry Lane",value:e.selectedPlace.line_1},on:{input:e.update}})],1),e._v(" "),l("div",{staticClass:"w-1/2 md:w-1/4 px-2 mb-3"},[l("label",[e._v("City")]),e._v(" "),l("text-input",{attrs:{type:"text",placeholder:"Kansas City",value:e.selectedPlace.city},on:{input:e.update}})],1),e._v(" "),l("div",{staticClass:"w-1/2 md:w-1/4 px-2 mb-3"},[l("label",[e._v("State")]),e._v(" "),l("text-input",{attrs:{type:"text",placeholder:"MO",value:e.selectedPlace.state},on:{input:e.update}})],1),e._v(" "),l("div",{staticClass:"w-1/2 md:w-1/4 px-2 mb-3"},[l("label",[e._v("Zipcode")]),e._v(" "),l("text-input",{attrs:{type:"tel",placeholder:"64102",value:e.selectedPlace.zipcode},on:{input:e.update}})],1),e._v(" "),l("div",{staticClass:"w-1/2 md:w-1/4 px-2 mb-3"},[l("label",[e._v("Country")]),e._v(" "),l("text-input",{attrs:{type:"text",placeholder:"USA",value:e.selectedPlace.country},on:{input:e.update}})],1),e._v(" "),l("div",{staticClass:"w-1/2 px-2 mb-3"},[l("label",[e._v("Lat")]),e._v(" "),l("text-input",{attrs:{type:"tel",placeholder:"39.0889824",value:e.selectedPlace.lat},on:{input:e.update}})],1),e._v(" "),l("div",{staticClass:"w-1/2 px-2 mb-3"},[l("label",[e._v("Lon")]),e._v(" "),l("text-input",{attrs:{type:"tel",placeholder:"-94.6068529",value:e.selectedPlace.lon},on:{input:e.update}})],1)]):e._e()])}),[],!1,null,null,null).exports;Statamic.booting((function(){Statamic.$components.register("places_search-fieldtype",e)}))})();